@page "/employeecreate"
<br />
<AuthorizeView Roles="@_pageRoles">
    <Authorized>
        <EditForm Model="@employee" OnValidSubmit="@HandleValidSubmit" Context="tableRowContext">
            <MudGrid>
                <MudItem xs="12" sm="4" md="3">
                    <MudPaper Class="pa-8 ma-2" Elevation="3">
                        <div class="d-flex justify-center mb-4">
                            @if (!string.IsNullOrEmpty(@imageBase64))
                            {
                                <MudAvatar Image="@image" Style="height:250px; width:250px;"> </MudAvatar>
                            }
                            else
                            {
                                <MudAvatar Color="Color.Secondary" Style="height:250px; width:250px;">@_firstLetterOfName</MudAvatar>
                            }
                        </div>
                        <MudCardActions Class="d-flex justify-center">
                            <InputFile id="fileInput" OnChange="UploadFiles" hidden />
                            <MudButton HtmlTag="label"
                                       Variant="Variant.Text"
                                       Color="Color.Primary"
                                       Size="Size.Small"
                                       StartIcon="@Icons.Filled.CloudUpload"
                                       for="fileInput">
                                Upload Image
                            </MudButton>
                        </MudCardActions>
                    </MudPaper>
                </MudItem>
                <MudItem xs="12" sm="8" md="9">
                    <MudPaper Class="pa-8 ma-2" Elevation="3">
                        <MudGrid>
                            <MudItem xs="12" md="6">
                                <MudTextField @bind-Value="@employee.Firstname" Margin="Margin.Dense" T="string" Variant="Variant.Outlined" Label="First Name" Required="true" RequiredError="First name is required!"></MudTextField>
                            </MudItem>
                            <MudItem xs="12" md="6">
                                <MudTextField @bind-Value="@employee.Lastname" Margin="Margin.Dense" T="string" Variant="Variant.Outlined" Label="Last Name" Required="true" RequiredError="Last name is required!"></MudTextField>
                            </MudItem>
                            <MudItem xs="12" md="6">
                                <SearchingDropDownList T="int" _label="Tittle Name*" _data="tittleAutocomplateModel" @bind-TbText="employee.TitleId"></SearchingDropDownList>
                            </MudItem>
                            <MudItem xs="12" md="6">
                                <SearchingDropDownList T="int" _label="Position Name*" _data="positionAutocomplateModel" @bind-TbText="employee.PositionId"></SearchingDropDownList>
                            </MudItem>
                            <MudItem xs="12" md="6">
                                <SearchingDropDownList T="int" _label="Location Name*" _data="locationAutocomplateModel" @bind-TbText="employee.LocationId"></SearchingDropDownList>
                            </MudItem>
                            <MudItem xs="12" md="6">
                                <MudTextField @bind-Value="@employee.IPT" T="string" Margin="Margin.Dense" Variant="Variant.Outlined" Label="IPT" Required="true" RequiredError="IPT is required!"></MudTextField>
                            </MudItem>
                            <MudItem xs="12" md="6">
                                <MudTextField @bind-Value="@employee.CellPhone" T="string" Margin="Margin.Dense" Variant="Variant.Outlined" Label="Cell Phone" Required="true" RequiredError="Cell Phone is required!"></MudTextField>
                            </MudItem>
                            <MudItem xs="12" md="6">
                                <MudDatePicker @bind-Date="@birthdate" DateFormat="dd/MM/yyyy" Margin="Margin.Dense" Variant="Variant.Outlined" Required="true" RequiredError="Date of birth is required!"></MudDatePicker>
                            </MudItem>
                            <MudItem xs="12" Class="d-flex justify-end flex-grow-1 gap-4">
                                <MudButton Variant="Variant.Filled" Color="Color.Success" StartIcon="@Icons.Material.Filled.Save" ButtonType="ButtonType.Submit">Save</MudButton>
                            </MudItem>
                        </MudGrid>
                    </MudPaper>
                </MudItem>
            </MudGrid>
        </EditForm>
    </Authorized>
    <NotAuthorized>
        <NotAccess />
    </NotAuthorized>
</AuthorizeView>
